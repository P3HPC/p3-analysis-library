
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>p3.metrics package &#8212; P3 Analysis Library  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery-rendered-html.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="p3.plot package" href="p3.plot.html" />
    <link rel="prev" title="p3.data package" href="p3.data.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">P3 Analysis Library</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction to P3 Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Collecting P3 Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="case-studies/index.html">Case Studies</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="p3.html">p3 package</a></li>
<li class="toctree-l1"><a class="reference internal" href="notices-and-disclaimers.html">Notices and Disclaimers</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="p3.html">p3 package</a><ul>
      <li>Previous: <a href="p3.data.html" title="previous chapter">p3.data package</a></li>
      <li>Next: <a href="p3.plot.html" title="next chapter">p3.plot package</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="p3-metrics-package">
<h1>p3.metrics package<a class="headerlink" href="#p3-metrics-package" title="Permalink to this heading">¶</a></h1>
<section id="module-p3.metrics">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-p3.metrics" title="Permalink to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="p3.metrics.application_efficiency">
<span class="sig-prename descclassname"><span class="pre">p3.metrics.</span></span><span class="sig-name descname"><span class="pre">application_efficiency</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">foms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lower'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#p3.metrics.application_efficiency" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate application efficiency.</p>
<p>Application efficiency represents achieved performance relative to the
best-known performance of any other application solving the same problem
on the same platform. This function determines the “best-known” performance
for each combination of “platform” and “problem” in the input DataFrame.</p>
<p>Calculated values will lie in the range <span class="math notranslate nohighlight">\([0, 1]\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>DataFrame</em>) – A pandas DataFrame storing performance data. The following columns are
required: “problem”, “platform”, “application”, “fom”.</p></li>
<li><p><strong>foms</strong> (<em>string</em>) – The interpretation of the figure of merit: “lower” if lower values are
better, and “higher” if higher values are better.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A new pandas DataFrame storing the application efficiency values
calculated from the performance data
provided in <cite>df</cite>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If any of the required columns are missing from <cite>df</cite>.
    If <cite>foms</cite> is not “lower” or “higher”.</p></li>
<li><p><strong>TypeError</strong> – If any value in the “fom” column of <cite>df</cite> is a non-numeric value.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="p3.metrics.divergence">
<span class="sig-prename descclassname"><span class="pre">p3.metrics.</span></span><span class="sig-name descname"><span class="pre">divergence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cov</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#p3.metrics.divergence" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate code divergence.</p>
<p>Code divergence is calculated as proposed by Harrell and Kitson
in “<a class="reference external" href="https://doi.org/10.1109/P3HPC.2018.00006">Effective Performance Portability</a>”, using the Jaccard distance
to measure the distance between two source codes.</p>
<p>For a given set of platforms, <span class="math notranslate nohighlight">\(H\)</span>, the code divergence <span class="math notranslate nohighlight">\(CD\)</span> of
an application <span class="math notranslate nohighlight">\(a\)</span> solving problem <span class="math notranslate nohighlight">\(p\)</span> is an average of
pairwise distances:</p>
<div class="math notranslate nohighlight">
\[CD(a, p, H) = \binom{|H|}{2}^{-1}
              \sum_{\{i, j\} \in H \times H} {d_{i, j}(a, p)}\]</div>
<p>where <span class="math notranslate nohighlight">\(d_{i, j}(a, p)\)</span> represents the distance between the source
code required by platforms <span class="math notranslate nohighlight">\(i\)</span> and <span class="math notranslate nohighlight">\(j\)</span> for application
<span class="math notranslate nohighlight">\(a\)</span> to solve problem <span class="math notranslate nohighlight">\(p\)</span>.</p>
<p>The distance is calculated as:</p>
<div class="math notranslate nohighlight">
\[d_{i, j}(a, p) = 1 - \frac{|c_i(a, p) \cap c_j(a, p)|}
                          {|c_i(a, p) \cup c_j(a, p)|}\]</div>
<p>where <span class="math notranslate nohighlight">\(c_i\)</span> and <span class="math notranslate nohighlight">\(c_j\)</span> are the lines of code required to compile
application <span class="math notranslate nohighlight">\(a\)</span> and solve problem <span class="math notranslate nohighlight">\(p\)</span> using platforms <span class="math notranslate nohighlight">\(i\)</span>
and <span class="math notranslate nohighlight">\(j\)</span>. A distance of 0 means that all code is shared between the
two platforms, whereas a distance of 1 means that no code is shared.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>DataFrame</em>) – <p>A pandas DataFrame storing performance data. The following columns are
required: “problem”, “platform”, “application”, “coverage_key”.</p>
<p>Values of the “coverage_key” column are used as keys, to identify
corresponding coverage traces stored in the <cite>cov</cite> DataFrame.</p>
</p></li>
<li><p><strong>cov</strong> (<em>DataFrame</em>) – <p>A pandas DataFrame storing coverage data. The following columns are
required: “coverage_key”, “coverage”.</p>
<p>Values of the “coverage” column must be coverage traces adhering to the
P3 Analysis Library coverage schema.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A new pandas DataFrame storing the code divergence values calculated
from the coverage data provided in <cite>cov</cite> and the configuration data
provided in <cite>df</cite>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If any of the required columns are missing from <cite>df</cite>.
    If any value in the “coverage” column of <cite>cov</cite> fails to validate
    against the P3 coverage schema.</p></li>
<li><p><strong>TypeError</strong> – If any value in the “coverage” column of <cite>cov</cite> is not a JSON string.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="p3.metrics.pp">
<span class="sig-prename descclassname"><span class="pre">p3.metrics.</span></span><span class="sig-name descname"><span class="pre">pp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#p3.metrics.pp" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate performance portability from architectural and/or application
efficiency.</p>
<p>Performance portability is calculated as proposed by Pennycook, Sewall and
Lee in “<a class="reference external" href="https://doi.org/10.48550/arXiv.1611.07409">A Metric for Performance Portability</a>”. For a given set of
platforms, <span class="math notranslate nohighlight">\(H\)</span>, the performance portability <span class="math notranslate nohighlight">\(PP\)</span> of an
application <span class="math notranslate nohighlight">\(a\)</span> solving problem <span class="math notranslate nohighlight">\(p\)</span> is:</p>
<div class="math notranslate nohighlight">
\[PP(a, p, H) = \cases{
  \dfrac{|H|}{\sum_{i \in H} \dfrac{1}{e_i(a,p)}} &amp;
    $\text{if } i \text{ is supported } \forall i \in H$ \cr
  0 &amp;
    $\text{ otherwise }$
}\]</div>
<p>where <span class="math notranslate nohighlight">\(e_i(a,p)\)</span> is the performance efficiency of application
<span class="math notranslate nohighlight">\(a\)</span> solving problem <span class="math notranslate nohighlight">\(p\)</span> on platform <span class="math notranslate nohighlight">\(i\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<em>DataFrame</em>) – A pandas DataFrame storing performance data. The following columns are
always required: “problem”, “platform”, “application”. At least one of
the following two columns are required: “arch eff”, “app eff”.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A new pandas DataFrame storing the performance portability values
calculated from the architectural efficiency and/or application
efficiency data provided in <cite>df</cite>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If any of the required columns are missing from <cite>df</cite>.</p></li>
<li><p><strong>TypeError</strong> – If any of the values in the efficiency column(s) are non-numeric.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>


          </div>
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy; Intel Corporation. Intel, the Intel logo, and other Intel marks are trademarks of Intel Corporation or its subsidiaries. Other names and brands may be claimed as the property of others.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.1.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="_sources/p3.metrics.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>